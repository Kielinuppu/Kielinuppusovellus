(()=>{var e={};e.id=432,e.ids=[432],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},83333:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c});var s=r(70260),a=r(28203),i=r(25155),o=r.n(i),n=r(67292),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["soittolistat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59095)),"C:\\Users\\ansav\\Kielinuppu sovellus\\src\\app\\soittolistat\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"C:\\Users\\ansav\\Kielinuppu sovellus\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\ansav\\Kielinuppu sovellus\\src\\app\\soittolistat\\page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/soittolistat/page",pathname:"/soittolistat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},16549:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,96313,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},10469:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,86013,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},85635:(e,t,r)=>{Promise.resolve().then(r.bind(r,18592))},99707:(e,t,r)=>{Promise.resolve().then(r.bind(r,88532))},44767:(e,t,r)=>{Promise.resolve().then(r.bind(r,59095))},5015:(e,t,r)=>{Promise.resolve().then(r.bind(r,17075))},18741:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},44269:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},88532:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(45512);r(58009);var a=r(79334);function i({children:e}){return(0,a.useRouter)(),(0,a.usePathname)(),(0,s.jsx)(s.Fragment,{children:e})}},17075:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(45512),a=r(58009),i=r(35668),o=r(18741),n=r(41680);let l=(0,n.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),c=(0,n.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var u=r(79334),d=r(17656),p=r(44269);function m({isOpen:e,onClose:t}){let[r,i]=(0,a.useState)(""),o=(0,u.useRouter)();if(!e)return null;let n=async e=>{if(e.preventDefault(),r.trim())try{let e=localStorage.getItem("userCode");if(!e){console.error("K\xe4ytt\xe4j\xe4\xe4 ei l\xf6ydy");return}let s=(0,d.rJ)(Object(function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}()),"soittolistat"),a=await (0,d.GG)(s),n=Math.max(...a.docs.map(e=>e.data().ID||0),0)+1,l={ID:n,Name:r,Lauluts:"",User:e,Created:new Date().toISOString(),Updated:new Date().toISOString()};await (0,d.BN)((0,d.H9)(s,n.toString()),l),i(""),t(),o.push(`/soittolistat/soittolista?id=${n}`)}catch(e){console.error("Virhe soittolistan luonnissa:",e)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#e9f1f3] rounded-lg w-full max-w-2xl p-8 relative",children:[(0,s.jsx)("button",{onClick:t,className:"absolute right-4 top-4",children:(0,s.jsx)(p.A,{size:24,className:"text-black"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-8",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold",children:"ANNA SOITTOLISTALLE NIMI"}),(0,s.jsxs)("form",{onSubmit:n,className:"w-full max-w-lg space-y-6",children:[(0,s.jsx)("input",{type:"text",placeholder:"Soittolistan nimi",value:r,onChange:e=>i(e.target.value),className:"w-full p-4 rounded-lg shadow-md focus:outline-none"}),(0,s.jsx)("button",{type:"submit",className:"w-40 mx-auto block py-3 bg-[#F6F7E7] rounded-lg font-bold shadow-md hover:bg-[#F0F1E1] transition-colors",children:"LUO"})]})]})]})})}!function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}();let h=(0,n.A)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),x=(0,n.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),f=(0,n.A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),v=(0,n.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),b=(0,n.A)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),g=(0,n.A)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);var y=r(42390),w=r(45103);!function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}();let k=({playlistId:e,onClose:t})=>{let[r,i]=(0,a.useState)([]),[o,n]=(0,a.useState)(0),[l,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(0),[k,N]=(0,a.useState)(0),[j,C]=(0,a.useState)(""),[E,O]=(0,a.useState)(""),[M,P]=(0,a.useState)(!1),[S,_]=(0,a.useState)(!1),[A,L]=(0,a.useState)(0),[U,T]=(0,a.useState)(0),[q,D]=(0,a.useState)(0),F=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!F.current){let e=new Audio;e.preload="metadata",F.current=e}let e=F.current,t=()=>{e&&(N(e.duration),l&&e.play())},s=()=>{e&&m(e.currentTime)},a=()=>{e&&(M?(e.currentTime=0,e.play()):(o<r.length-1?(n(e=>e+1),e.currentTime=0):n(0),c(!0)))};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",s),e.addEventListener("ended",a),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",s),e.removeEventListener("ended",a),e.pause()}},[M,o,r.length,l]),(0,a.useEffect)(()=>{let e=e=>{"ArrowLeft"===e.key&&o>0&&n(e=>e-1),"ArrowRight"===e.key&&o<r.length-1&&n(e=>e+1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,r.length]);let I=e=>{try{return JSON.parse(e.replace(/'/g,'"'))}catch(t){return console.error("Parse error:",e,t),null}};(0,a.useEffect)(()=>{(async()=>{if(e)try{let t=(0,d.H9)(Object(function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}()),"soittolistat",e),r=await (0,d.x7)(t);if(r.exists()){let e=r.data();if(e.Lauluts){let t=e.Lauluts.split(",").map(async e=>{let t=await (0,d.x7)((0,d.H9)(Object(function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}()),"laulut",e));return t.exists()?{id:e,...t.data()}:null}),r=(await Promise.all(t)).filter(e=>null!==e);i(r),r.length>0&&await R(r[0])}}}catch(e){console.error("Error fetching songs:",e)}})()},[e]);let R=async e=>{if(e)try{let t=I(e["Laulun kuvake"]);if(t?.filename){let e=(0,y.KR)(Object(function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}()),`images/laulut/${t.filename}`),r=await (0,y.qk)(e);C(r)}let r=I(e.audio);if(r?.filename&&F.current){let e=(0,y.KR)(Object(function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}()),`Laulut/audio/${r.filename}`),t=await (0,y.qk)(e);O(t)}}catch(e){console.error("Error loading media:",e)}};(0,a.useEffect)(()=>{r[o]&&R(r[o])},[o,r]),(0,a.useEffect)(()=>{if(!F.current||!E)return;let e=F.current,t=e.src===E?e.currentTime:0;if(e.src=E,e.loop=M,e.currentTime=t,l){let t=e.play();void 0!==t&&t.catch(e=>{console.error("Error playing audio:",e)})}},[E,l,M]);let z=()=>{_(!1)},G=()=>{F.current&&(l?F.current.pause():F.current.play(),c(!l))},K=e=>{let t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`};return(0,s.jsxs)("div",{className:"fixed inset-0 bg-[#e9f1f3] overflow-auto",children:[(0,s.jsx)("button",{onClick:t,className:"fixed top-4 right-6 p-1 z-50",children:(0,s.jsx)(p.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:"max-w-xl mx-auto pt-16 pb-4 px-4",children:[(0,s.jsxs)("div",{className:"mb-6",children:[j&&r[o]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"relative aspect-square w-full max-w-md mx-auto mb-4 cursor-grab active:cursor-grabbing",onTouchStart:e=>{T(e.touches[0].clientX)},onTouchMove:e=>{D(e.touches[0].clientX)},onTouchEnd:()=>{if(!U||!q)return;let e=U-q;e>50&&o<r.length-1&&n(e=>e+1),e<-50&&o>0&&n(e=>e-1),T(0),D(0)},onMouseDown:e=>{_(!0),L(e.clientX)},onMouseMove:e=>{if(!S)return;let t=e.clientX-A;Math.abs(t)>=50&&(t>0&&o>0?(n(e=>e-1),_(!1)):t<0&&o<r.length-1&&(n(e=>e+1),_(!1)))},onMouseUp:z,onMouseLeave:z,children:(0,s.jsx)(w.default,{src:j,alt:r[o].Name,fill:!0,className:"object-contain select-none",sizes:"(max-width: 768px) 100vw, 400px",draggable:!1})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-center mb-6",children:r[o].Name})]}),(0,s.jsxs)("div",{className:"max-w-sm mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:K(u)}),(0,s.jsx)("input",{type:"range",min:"0",max:k||0,value:u,onChange:e=>{if(!F.current)return;let t=Number(e.target.value);F.current.currentTime=t,m(t)},className:"flex-1"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:K(k)})]}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center px-4",children:[(0,s.jsx)(h,{className:`w-5 h-5 cursor-pointer ${M?"stroke-blue-500":"stroke-black"}`,onClick:()=>P(!M)}),(0,s.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>{F.current&&(F.current.currentTime-=10)},children:[(0,s.jsx)(x,{className:"w-5 h-5 stroke-black"}),(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"10s"})]}),l?(0,s.jsx)(f,{className:"w-6 h-6 stroke-black cursor-pointer",onClick:G}):(0,s.jsx)(v,{className:"w-6 h-6 stroke-black cursor-pointer",onClick:G}),(0,s.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>{F.current&&(F.current.currentTime+=30)},children:[(0,s.jsx)(b,{className:"w-5 h-5 stroke-black"}),(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"30s"})]}),(0,s.jsx)(g,{className:"w-5 h-5 stroke-black cursor-pointer",onClick:()=>n(e=>(e+1)%r.length)})]})]})]}),(0,s.jsx)("div",{className:"bg-white/10 rounded-lg",children:(0,s.jsx)("div",{className:"space-y-1 p-2",children:r.map((e,t)=>(0,s.jsx)("button",{className:`w-full p-2.5 text-left rounded transition-colors ${t===o?"bg-white/20":"hover:bg-white/10"}`,onClick:()=>n(t),children:e.Name},e.id))})})]})]})};!function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}();let N=()=>{let e=(0,u.useRouter)(),[t,r]=(0,a.useState)(!1),[n,p]=(0,a.useState)([]),[h,x]=(0,a.useState)(!1),[f,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("userCode");if(!e)return;let t=(0,d.rJ)(Object(function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}()),"soittolistat"),r=(0,d.P)(t,(0,d._M)("User","==",e));p((await (0,d.GG)(r)).docs.map(e=>({id:e.data().ID,name:e.data().Name})))})()},[]);let b=t=>{e.push(`/soittolistat/soittolista?id=${t}`)},g=async e=>{try{await (0,d.kd)((0,d.H9)(Object(function(){var e=Error("Cannot find module '@/lib/firebase'");throw e.code="MODULE_NOT_FOUND",e}()),"soittolistat",e.toString())),p(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Virhe poistossa:",e)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-[#e9f1f3] p-4",children:[(0,s.jsxs)("div",{className:"sticky top-0 flex justify-between items-center mb-6",children:[(0,s.jsx)(i.A,{className:"cursor-pointer text-black",size:45,strokeWidth:3,onClick:()=>e.push("/home")}),(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"OMAT SOITTOLISTAT"}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-[#F6F7E7] flex items-center justify-center cursor-pointer",onClick:()=>r(!0),children:(0,s.jsx)(o.A,{className:"text-black",size:30,strokeWidth:3})})]}),(0,s.jsx)("div",{className:"space-y-4 max-w-[50%] mx-auto",children:n.map(e=>(0,s.jsxs)("div",{onClick:()=>{v(e.id.toString()),x(!0)},className:"bg-white rounded-lg h-[75px] flex items-center justify-between px-4 shadow-md cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("span",{className:"text-lg",children:e.name}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(l,{className:"cursor-pointer text-black",size:24,onClick:t=>{t.stopPropagation(),b(e.id)}}),(0,s.jsx)(c,{className:"cursor-pointer text-black",size:24,onClick:t=>{t.stopPropagation(),g(e.id)}})]})]},e.id))}),(0,s.jsx)(m,{isOpen:t,onClose:()=>r(!1)}),h&&(0,s.jsx)(k,{playlistId:f,onClose:()=>x(!1)})]})}},18592:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\ansav\\\\Kielinuppu sovellus\\\\src\\\\app\\\\components\\\\AuthGuard.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\ansav\\Kielinuppu sovellus\\src\\app\\components\\AuthGuard.tsx","default")},71354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>c});var s=r(62740),a=r(1093),i=r.n(a),o=r(66131),n=r.n(o);r(61135);var l=r(18592);let c={title:"Kielinuppu",description:"Sovellus ammattilaisille"};function u({children:e}){return(0,s.jsx)("html",{lang:"fi",children:(0,s.jsx)("body",{className:`${i().variable} ${n().variable}`,children:(0,s.jsx)(l.default,{children:e})})})}},59095:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\ansav\\\\Kielinuppu sovellus\\\\src\\\\app\\\\soittolistat\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\ansav\\Kielinuppu sovellus\\src\\app\\soittolistat\\page.tsx","default")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(88077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},61135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,367,77,682,913,390,103],()=>r(83333));module.exports=s})();